
<!DOCTYPE html>
<html>
<head>
  <!--
    Kilsbergen MkDocs theme copyright 2019 Ruud van Asseldonk.
    Licensed under the Apache 2.0 license.
    See https://github.com/ruuda/kilsbergen.
  -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Versions — Tako</title>
  <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,400i" rel="stylesheet">
  <style>
  /* The Inter font family, see https://rsms.me/inter.
     https://rsms.me/inter/#faq-cdn suggests that linking these files directly is fine.
  */
  @font-face {
    font-family: Inter;
    font-style:  normal;
    font-weight: 400;
    src: url("https://rsms.me/inter/font-files/Inter-Regular.woff2?v=3.11") format("woff2"),
         url("https://rsms.me/inter/font-files/Inter-Regular.woff?v=3.11") format("woff");
  }
  @font-face {
    font-family: Inter;
    font-style:  italic;
    font-weight: 400;
    src: url("https://rsms.me/inter/font-files/Inter-Italic.woff2?v=3.11") format("woff2"),
         url("https://rsms.me/inter/font-files/Inter-Italic.woff?v=3.11") format("woff");
  }
  @font-face {
    font-family: Inter;
    font-style:  normal;
    font-weight: 500;
    src: url("https://rsms.me/inter/font-files/Inter-Medium.woff2?v=3.11") format("woff2"),
         url("https://rsms.me/inter/font-files/Inter-Medium.woff?v=3.11") format("woff");
  }
  @font-face {
    font-family: Inter;
    font-style:  normal;
    font-weight: 600;
    src: url("https://rsms.me/inter/font-files/Inter-SemiBold.woff2?v=3.11") format("woff2"),
         url("https://rsms.me/inter/font-files/Inter-SemiBold.woff?v=3.11") format("woff");
  }
  @font-face {
    font-family: Inter;
    font-style:  normal;
    font-weight: 700;
    src: url("https://rsms.me/inter/font-files/Inter-Bold.woff2?v=3.11") format("woff2"),
         url("https://rsms.me/inter/font-files/Inter-Bold.woff?v=3.11") format("woff");
  }
  /* Modular scale with exponent 1.7^(1/3). The 1.7 was chosen as the line hight
     that goes well with Inter. Previously I used 1.59, but it was just too tight.
     0.59em
     0.70em
     1.00em
     1.19em
     1.42em
     1.70em
     2.02em
     2.42em
  */
  * { margin: 0; padding: 0; border-spacing: 0; }
  html {
    font-family: Inter, Roboto, sans-serif;
    /*
    Turn on character variant 8 for Inter, which puts serifs on the uppercase I.
    Also turn on variant 1, which has a curved 1.
    Disable contextual alternates for now. There is a bug, either in Inter or
    in Chrome (https://crbug.com/1046095) that causes colons after a <strong> to
    be raised above the baseline.
    */
    font-feature-settings: 'cv01' 1, 'cv08' 1, 'calt' 0;

    font-size: 16px;
    line-height: 1.7em;
    background-color: #fff;
    height: 100%;
  }
  body {
    height: 100%;
  }
  #content {
    display: grid;
    grid-template-columns: auto 16rem 50rem auto;
    color: #333;
    min-height: 100%;
  }
  #main {
    grid-area: 1 / 3 / 2 / 4;
    padding: 2.2rem;
    padding-left: 4rem;
    padding-right: 4rem;
    overflow: hidden;
  }
  #breadcrumbs {
    margin-bottom: 3rem;
    word-spacing: 0.3em;
    color: #78a;
  }
  #breadcrumbs a {
    word-spacing: 0;
    color: #78a;
  }
  article {
    margin-top: 1.3rem;
  }
  h1, h2, h3 {
    font-weight: 600;
    font-size: 1rem;
    color: #444;
    position: relative;
  }
  h1 {
    font-size: 2rem;
    margin-bottom: 2.1rem;
    line-height: 2.42rem;
    margin-top: -0.35rem;
    margin-bottom: 1.75rem;
  }
  h2 {
    font-size: 1.42rem;
    margin-top: 3.5rem;
    margin-bottom: 1.6rem;
  }
  .headerlink {
    position: absolute;
    left: -0.9em;
    width: 1em;
    opacity: 0.0;
    transition: opacity 0.2s ease-in;
  }
  /* Don't show the link for h1, usually you only have a single h1 at the top
     of the page, so it doesn't make much sense to add an anchor there, and with
     the larger font size, it doesn't fit in a narrow viewport. */
  h2:hover .headerlink, h3:hover .headerlink {
    opacity: 1.0;
  }
  code {
    font-family: 'Roboto Mono', monospace;
    font-size: 0.84rem;
    line-height: 1.5rem;
  }
  h3 > code {
    /* Roboto Mono 500 is about as heavy as Inter semibold (600). */
    font-weight: 500;
  }
  abbr {
    text-transform: uppercase;
    /* Downsize so caps are x-height, and compensate weight loss. */
    font-size: 0.78rem;
    font-weight: 500;
    letter-spacing: 0.05rem;
    /* Prevent abbrs from changing the line height of lines in which they occur. */
    line-height: 0;
  }
  sub, sup {
    /* Don't disturb the line height of normal text. */
    line-height: 0rem;
    font-size: 0.78rem;
    font-weight: 500;
  }
  p > code,
  a > code,
  h3 > code,
  li > code,
  td > code,
  dt > code,
  dd > code {
    background-color: #f0f0f0;
    padding: 0.13rem;
    padding-left: 0.3rem;
    padding-right: 0.3rem;
    border-radius: 0.2rem;
    line-height: 1rem;
  }
  h3 {
    padding-top: 0.9rem;
    padding-bottom: 0.8rem;
  }
  h3 > code {
    margin-left: -0.1rem;
  }
  a {
    color: #36d;
    text-decoration: none;
  }
  p, ul, ol, dl, pre, table {
    /* Same space as line height, leave exactly one line blank. */
    margin-bottom: 1.7rem;
  }
  pre {
    padding-top: 0.8rem;
    padding-bottom: 0.9rem;
    padding-left: 1.19rem;
    padding-right: 0;
    background-color: #f8f8f8;
    border-radius: 0 0.2rem 0.2rem 0;
    border-left: 0.3rem solid #d5d8e0;
    overflow-x: auto;
  }
  pre > code {
    margin-right: 1.41rem;
    color: #555;
  }
  code .k { color: #36d; }
  code .kt, code .nb { color: #d36; }
  code .c1, code .cm { color: #d36; font-style: italic; }
  code .s { color: #c43; }
  ul, ol {
    list-style-type: none;
    counter-reset: item;
  }
  table {
    font-variant-numeric: tabular-nums;
  }
  th, td {
    padding-right: 2rem;
  }
  th {
    text-align: left;
  }
  td > img {
    display: block;
    padding-top: 1em;
    padding-bottom: 1em;
  }
  dl {
    display: grid;
    grid-template-columns: 1fr 4fr;
    grid-column-gap: 2em;
  }
  dl dt {
    text-align: right;
  }
  #main ul li:before {
    color: #555;
    content: '\2022';
    display: inline-block;
    font-weight: 700;
    margin-left: -0.9rem;
    width: 0.9rem;
  }
  #main ul li {
    margin-left: 0.87rem;
  }
  #main ol li:before {
    content: counter(item);
    display: inline-block;
    font-weight: 700;
    width: 0.8rem;
    margin-left: -1.6rem;
    padding-right: 0.8rem;
  }
  #main ol li {
    margin-left: 1.6rem;
    counter-increment: item;
  }
  #nav-prev-next {
    margin-top: 3.4rem;
    padding-bottom: 3.3rem;
  }
  #nav-prev, #nav-next, #repo-link {
    display: inline-block;
  }
  #nav-prev {
    float: left;
  }
  #nav-next, #repo-link {
    float: right;
    text-align: right;
  }
  #nav-prev::before {
    content: '\219e';
    padding-right: 0.5em;
  }
  #nav-next::after {
    content: '\21a0';
    padding-left: 0.5em;
  }
  aside {
    grid-area: 1 / 1 / 2 / 3;
    border-right: 1px solid #eee;
    background-color: #fafafa;
    color: #78a;
  }
  aside nav {
    margin-top: 9rem;
    padding-bottom: 3.4rem;
    width: 14rem;
    float: right;
    /* Put the active chapter border over the sidebar border. */
    margin-right: -1px;
  }
  aside a {
    color: inherit;
  }
  aside .toc-section {
    font-weight: 700;
  }
  aside ul {
    margin-bottom: 0;
  }
  aside li {
    overflow: hidden;
    text-overflow: ellipsis;
  }
  aside li ul {
    padding-top: 0.6rem;
    padding-bottom: 1.1rem;
  }
  aside li.toc-section {
    margin-top: 1.7rem;
  }
  aside li.toc-section {
    color: #36d;
  }
  aside li.current, aside li ul {
    border-right: 0.3em solid #d5d8e0;
    padding-left: 1em;
    margin-left: -1em;
  }
  aside li.toc-chapter.current {
    font-weight: 600;
  }
  aside li.toc-heading {
    padding-left: 1em;
    padding-right: 0.3em;
  }

  @media(max-width: 63rem)
  {
    #content {
      /* Manual implementation of max-width: on narrower viewports,
         auto-size the body. */
      grid-template-columns: 0 16rem auto 0;
    }
  }

  @media(max-width: 1150px)
  {
    html { font-size: 15px; }
  }

  /* Move the sidebar TOC below content at small widths. */
  @media(max-width: 800px)
  {
    #content {
      display: block;
    }
    aside {
      border-top: 1px solid #eee;
      border-right: 0px none;
      padding-top: 1.7em;
    }
    aside nav {
      margin-left: 4em;
      margin-top: 1.7em;
      margin-right: 0;
      float: none;
      width: auto;
    }
    #main {
      padding-bottom: 1.7em;
    }
    /* Now that the TOC is full-width, adding the border on the right to
       highlight the active page is not as clear anymore, it can be far away.
       The current chapter is still in boldface, but that does not work for
       section indexes. So point a guillemet at it as well. */
    aside li.current, aside li ul {
      border-right: 0px none;
      position: relative;
    }
    aside li.current:before {
      content: '\203a';
      position: absolute;
      left: 0;
    }
  }

  /* Use less generous margins for very narrow viewports. */
  @media(max-width: 650px)
  {
    #main {
      padding-left: 2rem;
      padding-right: 2rem;
    }
    aside nav {
      margin-left: 2rem;
      padding-bottom: 2rem;
    }
  }

  @media(max-width: 450px)
  {
    #main {
      padding-left: 1.7em;
      padding-right: 1.7em;
    }
    aside nav {
      margin-left: 1.7em;
    }
  }
  </style>
</head>
<body>
  <div id="content">
    <div id="main">
      <nav id="breadcrumbs">
        <a href="..">Tako</a>
         › <a href="../downloading-images/">User Guide</a> 
         › <a href="./">Versions</a> 
        <a id="repo-link" href="https://github.com/ruuda/tako/">GitHub</a>
      </nav>
      <article>
        <h1 id="versions">Versions<a class="headerlink" href="#versions">&para;</a></h1>
<p>Tako does not enforce any particular versioning scheme. Instead it implements a
simple version parser and constraint resolver that is compatible with most
versioning schemes, such as <a href="https://semver.org/">Semantic Versioning</a>.</p>
<h2 id="patterns">Patterns<a class="headerlink" href="#patterns">&para;</a></h2>
<p>Compatible versions are selected by matching versions against a pattern.
A pattern is either a <strong>wildcard pattern</strong> or a <strong>bounds pattern</strong>.</p>
<ul>
<li>A wildcard pattern is a version that may end in <code>*</code>.</li>
<li>A bounds pattern specifies an inclusive lower bound and an exclusive upper
   bound separated by <code>&lt;= v &lt;</code>.</li>
</ul>
<p>Some examples:</p>
<ul>
<li><code>*</code> matches any version.</li>
<li><code>1.*</code> matches <code>1.0</code>, <code>1.1</code>, <code>1.2</code>, etc., but not <code>2.0</code>, or <code>0.1</code>.
   It does match <code>1</code> and <code>1.0.0</code>, which are both equivalent to <code>1.0</code>.</li>
<li><code>1.13.7</code> matches <code>1.13.7</code>. It also matches <code>1.13.7.0</code>, <code>1.13.7.0.0</code>,
   etc., which are equivalent to <code>1.13.7</code>. Such a pattern can be used for
   version pinning.</li>
<li><code>1.0 &lt;= v &lt; 2.0</code> is the same as <code>1.*</code>.</li>
<li><code>2.3 &lt;= v &lt; 3.0</code> matches versions that are <a href="https://semver.org/">semver-compatible</a>
   with 2.3.</li>
</ul>
<h2 id="syntax">Syntax<a class="headerlink" href="#syntax">&para;</a></h2>
<p>Versions consist of <strong>parts</strong> separated by <strong>separators</strong>.</p>
<ul>
<li>A part is either numeric or a string. A numeric part is an unsigned integer.</li>
<li>A separator is one of <code>.</code>, <code>-</code>, and <code>_</code>.</li>
</ul>
<p>Versions map to a list of parts. Some examples:</p>
<ul>
<li><code>1.0.0</code> ⇒ <code>[1, 0, 0]</code></li>
<li><code>1.0.0-beta</code> ⇒ <code>[1, 0, 0, "beta"]</code></li>
<li><code>1.0.0-beta-25856-ge63d979e22</code> ⇒ <code>[1, 1, 0, "beta", 25856, "ge63d979e22"]</code></li>
<li><code>1.0.0-beta.2</code> ⇒ <code>[1, 0, 0, "beta", 2]</code></li>
<li><code>1.1.0.h-1</code> ⇒ <code>[1, 1, 0, "h", 1]</code></li>
<li><code>66.0.3359.117-1</code> ⇒ <code>[66, 0, 3359, 117, 1]</code></li>
<li><code>1.2a</code> ⇒ <code>[1, "2a"]</code></li>
</ul>
<h2 id="ordering">Ordering<a class="headerlink" href="#ordering">&para;</a></h2>
<p>Versions are ordered conventionally. They are compared part by part. String
parts order before numeric parts, and string parts order lexicographically.
Versions are implicitly padded with zero parts: when two versions with a
different number of parts are compared, the shorter one is padded with zeros.
It is generally a bad idea to use a versioning scheme with a variable number
of parts though. Separator characters do not affect ordering.</p>
<p>Some examples:</p>
<ul>
<li><code>1.0.0</code> &lt; <code>2.0.0</code></li>
<li><code>1.0.0</code> &lt; <code>1.1.0</code></li>
<li><code>1.0.0</code> &lt; <code>1.0.1</code></li>
<li><code>1</code> = <code>1.0</code></li>
<li><code>1-0</code> = <code>1.0</code></li>
<li><code>1.a</code> &lt; <code>1.0</code> (string parts order before numeric parts)</li>
<li><code>1.0.0.a</code> &lt; <code>1.0.0</code> (string parts order before the implicit zero part)</li>
<li><code>1.0.a</code> &lt; <code>1.0.b</code></li>
<li><code>1.0.0-beta.1</code> &lt; <code>1.0.0</code> (string parts order before the implicit zero part)</li>
<li><code>1.0.0-beta</code> &lt; <code>1.0.0-beta.1</code> (implicit zero orders before 1)</li>
<li><code>1.0.0-beta.1</code> &lt; <code>1.0.0-beta.2</code></li>
<li><code>1.2a</code> &lt; <code>1.1</code> (string parts order before numeric parts)</li>
</ul>
<p>Some of these might be counterintuitive. Unfortunately we cannot have both of
the following be true without complicating the comparison rules.</p>
<ul>
<li><code>1.0-beta.1</code> &lt; <code>1.0</code>.</li>
<li><code>1.0</code> &lt; <code>1.0.a</code></li>
</ul>
<p>Tako implements the first choice, and hence <code>1.0.a</code> &lt; <code>1.0</code>. To avoid
confusion, use a versioning scheme that has a fixed number of parts.</p>
      </article>
      <nav id="nav-prev-next">
        <a id="nav-prev" href="../configuration/" title="Configuration">Previous</a>
        <a id="nav-next" href="../tako-fetch/" title="tako fetch">Next</a>
        </nav>
      </div>
    <aside>
      <nav>
        <ul>
        <li class="toc-section"><a href="..">Overview</a></li>
          <li class="toc-section
            "><a href="../downloading-images/">User Guide</a></li>
          
            <li class="toc-chapter
              "><a href="../downloading-images/">Downloading Images</a></li>
            
            <li class="toc-chapter
              "><a href="../distributing-images/">Distributing Images</a></li>
            
            <li class="toc-chapter
              "><a href="../configuration/">Configuration</a></li>
            
            <li class="toc-chapter
               current"><a href="./">Versions</a></li>
            <li><ul>
                <li class="toc-heading"><a href="#patterns">Patterns</a></li>
                <li class="toc-heading"><a href="#syntax">Syntax</a></li>
                <li class="toc-heading"><a href="#ordering">Ordering</a></li>
                </ul></li>
               <li class="toc-section
            "><a href="../tako-fetch/">Reference</a></li>
          
            <li class="toc-chapter
              "><a href="../tako-fetch/">tako fetch</a></li>
            
            <li class="toc-chapter
              "><a href="../tako-store/">tako store</a></li>
            
            <li class="toc-chapter
              "><a href="../tako-gen-key/">tako gen-key</a></li>
            <li class="toc-section
            "><a href="../manifest-format/">Internals</a></li>
          
            <li class="toc-chapter
              "><a href="../manifest-format/">Manifest Format</a></li>
            </ul>
      </nav>
    </aside>
  </div>
</body>
</html>